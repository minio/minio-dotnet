version: 0.{build}
os: Visual Studio 2017
clone_depth: 2
configuration: Release

pull_requests:
  do_not_increment_build_number: true

environment:
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: true
  DOTNET_CLI_TELEMETRY_OPTOUT: 1

  # scripts to run before build
before_build:
- appveyor-retry dotnet restore -v Minimal

build_script:
  - ps: dotnet publish -c Release

test_script:
  - ps: dotnet test .\Minio.Tests\Minio.Tests.csproj -f netcoreapp2.0

deploy: off
